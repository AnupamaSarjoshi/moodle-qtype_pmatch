/**
 * This class provides functionality for try rule.
 *
 * This is based on the work of Dr Alistair Willis published:
 * http://aclweb.org/anthology/W/W15/W15-0628.pdf
 *
 * @module    qtype_pmatch
 * @class     tryrule
 * @package   question
 * @copyright 2016 The Open University
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since     2.9
 */
define("qtype_pmatch/tryrule",["jquery"],(function($){var t={baseUrl:"",sessKey:"",qid:"",pendingid:"",baseForm:null,init:function(){t.pendingid="tryrule_"+Math.random().toString(36).slice(2);var base=window.location;t.baseUrl=base.protocol+"//"+base.host+base.pathname.replace("question.php","type/pmatch/api/api.php"),$("#mform1").length?t.baseForm=$("#mform1"):t.baseForm=$("form.mform").first(),t.sessKey=t.baseForm.find('input[name="sesskey"]').val(),t.qid=t.baseForm.find('input[name="id"]').val(),$('input[name="tryrule"]').on("click",(function(e){e.preventDefault();var id=$(this).parents(".try-rule").prevAll(".answer-rule").first().attr("id").replace("fitem_id_answer_","");t.tryrule(id,this)}))},tryrule:function(id,btn){M.util.js_pending(t.pendingid);var rule=$("#id_answer_"+id).val().trim();if(null!=rule&&""!==rule){var display=$(btn).next(".try-rule-result"),fraction=$("#id_fraction_"+id).val(),data={type:"tryrule",qid:t.qid,ruletxt:rule,sesskey:t.sessKey,fraction:fraction};$.post(t.baseUrl,data,(function(result){display.html(result),M.util.js_complete(t.pendingid)}),"json")}}};return t}));

//# sourceMappingURL=tryrule.min.js.map